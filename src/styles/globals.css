@layer resets, tokens, base, components, utilities;

@import './tokens.css' layer(tokens);

@layer resets {
  *, *::before, *::after { box-sizing: border-box; }
  html, body { height: 100%; }
  body, h1, h2, h3, h4, p, ul, ol, figure { margin: 0; }
  ul[role='list'], ol[role='list'] { list-style: none; }
}

@layer base {
  :root { color-scheme: dark; }
  html { font-size: 16px; }
  body {
    font-family: var(--font-sans);
    background: radial-gradient(1200px 800px at 80% -200px, rgba(174, 0, 255, 0.12), transparent 55%),
                radial-gradient(1200px 800px at -10% 0%, rgba(0, 200, 255, 0.12), transparent 45%),
                var(--color-bg);
    color: var(--color-text);
    line-height: 1.65;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  .app-shell { display: grid; grid-template-rows: var(--header-h) 1fr var(--footer-h); height: 100svh; overflow: hidden; }
  .site-header { height: var(--header-h); display: grid; align-items: center; }
  .site-footer { height: var(--footer-h); }
  .app-main { overflow: auto; }
  .overlay-root { position: fixed; left: 0; right: 0; top: var(--header-h); bottom: var(--footer-h); z-index: 20; pointer-events: none; }
  .overlay-panel { position: fixed; left: 24px; top: var(--header-h); bottom: var(--footer-h); width: var(--panel-width); pointer-events: auto; z-index: 21; }
  .overlay-panel--right { position: fixed; right: 24px; top: var(--header-h); bottom: var(--footer-h); width: 360px; pointer-events: auto; z-index: 21; }
  .project-pager { position: fixed; right: 24px; top: calc(var(--header-h) + 12px); display: flex; gap: 8px; pointer-events: auto; z-index: 22; }
  .pager-btn { display: grid; place-items: center; width: 36px; height: 36px; border-radius: 999px; background: var(--color-bg-elev); border: 1px solid rgba(255,255,255,0.08); box-shadow: var(--shadow-1); text-decoration: none; }
  /* two-pane scroll containment */
  .project-grid { min-height: calc(100% - var(--space-16) * 2); }
  .project-aside { position: sticky; top: 0; height: auto; }
  .project-aside > .project-card { height: 100%; overflow: auto; }
  .project-content-scroll { min-height: 100%; overflow: visible; padding-bottom: var(--space-8); }

  a { color: inherit; text-decoration: none; }
  a:hover { text-decoration: underline; }

  img, picture, video, canvas, svg { display: block; max-width: 100%; }
  input, button, textarea, select { font: inherit; color: inherit; }
}

@layer components {
  .container { width: min(100% - 32px, var(--content-width)); margin-inline: auto; }
  .container--fluid { width: calc(100% - 48px); max-width: none; margin-inline: auto; }
  header.site-header { position: sticky; top: 0; backdrop-filter: saturate(1.2) blur(8px); background: color-mix(in oklab, var(--color-bg), transparent 65%); border-bottom: 1px solid rgba(255,255,255,0.06); z-index: 10; }
  .nav { display: flex; align-items: center; justify-content: space-between; padding: var(--space-3) 0; list-style: none; margin: 0; }
  .nav > li { list-style: none; }
  .nav a { padding: 8px 10px; border-radius: var(--radius-sm); display: inline-block; }
  .nav a:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 3px; }
  a:focus-visible { outline: 2px solid var(--color-accent-2); outline-offset: 3px; border-radius: var(--radius-sm); }
  footer.site-footer { border-top: 1px solid rgba(255,255,255,0.06); margin-top: var(--space-16); padding: var(--space-8) 0; color: var(--color-muted); }

  /* project layout */
  .project-grid { display: grid; grid-template-columns: 1fr; gap: var(--space-10); align-items: start; }
  .project-aside { position: sticky; top: 72px; align-self: start; height: calc(100svh - 72px); }
  .project-aside > .project-card { height: 100%; overflow: auto; }
  .project-card { background: var(--color-bg-elev); border: 1px solid rgba(255,255,255,0.06); border-radius: var(--radius-md); padding: var(--space-5); box-shadow: var(--shadow-1); }
  .project-meta { margin: 0; }
  .project-meta dt { color: var(--color-muted); font-size: var(--size-1); margin-top: var(--space-3); }
  .project-meta dd { margin: 2px 0 0 0; }
  .project-links { margin-top: var(--space-5); display: grid; gap: 6px; }
  .project-section { margin-top: var(--space-8); }

  /* push content when left panel is active */
  /* shift the page main when left panel is active */
  body.has-left-panel .app-main > * { margin-left: calc(var(--panel-width) + 48px); }
  @media (max-width: 900px) {
    body.has-left-panel .app-main > * { margin-left: 0; }
  }
  .overlay-panel .project-card { padding-top: var(--space-6); }

  /* shared card styles */
  .card { background: var(--color-bg-elev); border: 1px solid rgba(255,255,255,0.06); border-radius: var(--radius-md); padding: var(--space-5); box-shadow: var(--shadow-1); display: block; text-decoration: none; color: inherit; transition: transform 140ms ease, box-shadow 140ms ease, border-color 140ms ease; }
  .card:hover, .card:focus-visible { transform: translateY(-2px); border-color: rgba(255,255,255,0.12); box-shadow: var(--shadow-2); }
  .card-image { position: relative; aspect-ratio: 3 / 2; margin-bottom: var(--space-3); overflow: hidden; border-radius: var(--radius-md); }
  .card-image img { object-fit: cover; }
}

@layer utilities {
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
}
